# Телеграм бот для парсинга веб-страниц

Этот проект включает в себя создание Telegram-бота для парсинга веб-страницы с возможностью предварительного просмотра данных.

## Логика проекта

### Регистрация и авторизация

- Пользователи регистрируются в боте, предоставляя свой идентификатор Telegram.
- Авторизация происходит автоматически через Telegram API.

### Предварительный просмотр данных

- Пользователи могут запросить предварительный просмотр данных парсинга, прежде чем покупать подписку.
- Бот отправляет пользователю список 10 товаров с выбранной веб-страницы для ознакомления.

### Подписки

- Пользователи могут подписаться на платную подписку для полного доступа к функционалу парсинга.
- Подписка может быть ежемесячной или навсегда.

### Параметры парсинга

- Пользователи могут указывать параметры парсинга, такие как выбор сайта, метод парсинга (поиск или каталог), количество элементов и формат сохранения данных.

### Парсинг данных

- Бот выполняет парсинг данных в соответствии с указанными параметрами.
- Полученные данные сохраняются и отправляются пользователю по запросу.

### Управление подпиской

- Пользователи могут просмотреть информацию о своей подписке и ее статусе.
- Есть возможность обновить или отменить подписку.

## Таблицы базы данных

### Таблица пользователей (users)

- `user_id` (PRIMARY KEY): Уникальный идентификатор пользователя.
- `telegram_id`: Идентификатор Telegram пользователя.
- `username`: Имя пользователя в Telegram.
- `registration_date`: Дата регистрации пользователя.

### Таблица подписок (subscriptions)

- `subscription_id` (PRIMARY KEY): Уникальный идентификатор подписки.
- `user_id` (FOREIGN KEY): Идентификатор пользователя (связь с таблицей пользователей).
- `subscription_type`: Тип подписки (ежемесячная, навсегда и т. д.).
- `start_date`: Дата начала подписки.
- `end_date`: Дата окончания подписки.

### Таблица параметров парсинга (parsing_parameters)

- `parameter_id` (PRIMARY KEY): Уникальный идентификатор параметра.
- `user_id` (FOREIGN KEY): Идентификатор пользователя (связь с таблицей пользователей).
- `site_url`: URL веб-страницы для парсинга.
- `parsing_method`: Метод парсинга (поиск или каталог).
- `items_count`: Количество элементов для парсинга.
- `save_format`: Формат сохранения данных (json, CSV и т. д.).

### Таблица истории подписок (subscription_history)

- `history_id` (PRIMARY KEY): Уникальный идентификатор записи в истории.
- `user_id` (FOREIGN KEY): Идентификатор пользователя (связь с таблицей пользователей).
- `subscription_type`: Тип подписки (ежемесячная, навсегда и т. д.).
- `purchase_date`: Дата покупки подписки.

### Таблица результатов парсинга (parsing_results)

- `result_id` (PRIMARY KEY): Уникальный идентификатор результата парсинга.
- `user_id` (FOREIGN KEY): Идентификатор пользователя (связь с таблицей пользователей).
- `timestamp`: Временная метка выполнения парсинга.
- `parsed_data`: Результаты парсинга в выбранном формате (json, CSV и т. д.).

## Контрибьюторы

- Ваше Имя (@ваш_телеграм_ник)


## Установка и настройка

1. Создайте файл `.env` в корне проекта и добавьте следующие строки:

    ```dotenv
    TOKEN=ваш_токен_без_пробелов_и_ковычек
    DB_LITE=sqlite+aiosqlite:///my_base.db
    DB_URL=postgresql+asyncpg://логин:пароль@localhost:5432/database_name
    ```

2. Установите необходимые зависимости:

    ```
    pip install -r requirements.txt
    ```

3. Запустите бота:

    ```
    python main.py
    ```
## Использование

1. Добавьте бота в чат или начните с ним диалог в Telegram, используя его username.
2. Используйте команды бота для запуска парсинга и получения информации.

## Команды

- `/start`: Начать взаимодействие с ботом.
- `/help`: Показать список доступных команд и их описание.

## Лицензия

Этот проект лицензируется в соответствии с лицензией MIT. См. файл [LICENSE](LICENSE) для получения дополнительной информации.
